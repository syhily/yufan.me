---
import php from '@/helpers/php'
import type { HTTPMethod } from '@php-wasm/universal'
import tz from '@/assets/scripts/php/tz.php?raw'

const output = await php.runStream({
  relativeUri: Astro.request.url,
  code: tz,
  method: Astro.request.method as HTTPMethod,
  headers: Object.fromEntries(Astro.request.headers.entries()),
  body: await Astro.request.text(),
})
---

<Fragment set:html={output.stdoutText} />
