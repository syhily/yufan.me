---
import { Image } from 'astro:assets'
import { categories } from '@/helpers/content/schema'
import BaseLayout from '@/layouts/BaseLayout.astro'

interface Props {
  title: string
}

const { title } = Astro.props
---

<BaseLayout {title}>
  <div class="lg:px-2 2xl:px-5 py-3 md:py-4 2xl:py-5">
    <div class="container mx-auto px-4">
      <h1 class="post-title mb-3 xl:mb-4">{title}</h1>
      <div class="flex flex-wrap gap-2 md:gap-4 list-grouped mt-3 md:mt-4">
        {
          categories
            .sort((a, b) => b.counts - a.counts)
            .map((category) => (
              <div class="w-full md:w-6/12">
                <div class="list-item block">
                  <div class="media media-3x1">
                    <a href={category.permalink} class="media-content">
                      <Image src={category.cover} alt={category.name} width={600} height={200} />
                    </a>
                  </div>
                  <div class="list-content">
                    <div class="list-body">
                      <a href={category.permalink} class="list-title h5">
                        {category.name}
                      </a>
                      <div class="list-subtitle hidden md:block text-md text-secondary mt-2">
                        <div class="h-1x">
                          <Fragment set:html={category.description} />
                        </div>
                      </div>
                    </div>
                    <div class="list-footer mt-2">
                      <div class="text-muted text-sm">
                        <span class="inline-block">{`${category.counts} 篇文章`}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))
        }
      </div>
    </div>
  </div>
  <slot />
</BaseLayout>
