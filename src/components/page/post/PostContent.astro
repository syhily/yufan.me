---
import UnstyledImage from '@/components/image/UnstyledImage.astro';
import UnstyledModifiedTimeNotice from '@/components/notice/UnstyledModifiedTimeNotice.astro';
import UnstyledMusicPlayer from '@/components/player/UnstyledMusicPlayer.astro';
import { posts } from '@/helpers/schema';

interface Props {
  slug: string;
}

const { slug } = Astro.props;
const post = posts.find((post) => post.slug === slug);
if (!post) {
  return Astro.redirect('/404');
}

const { Content } = await post.render();
---

<Content
  components={{
    MusicPlayer: UnstyledMusicPlayer,
    Image: UnstyledImage,
    ModifiedTimeNotice: UnstyledModifiedTimeNotice,
  }}
/>
