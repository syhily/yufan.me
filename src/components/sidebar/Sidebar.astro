---
import type { Post, Tag } from '@/helpers/content/schema'
import AdminBlock from '@/components/partial/AdminBlock.astro'
import SearchBar from '@/components/search/SearchBar.astro'
import PendingComments from '@/components/sidebar/PendingComments.astro'
import RandomPosts from '@/components/sidebar/RandomPosts.astro'
import RandomTags from '@/components/sidebar/RandomTags.astro'
import RecentComments from '@/components/sidebar/RecentComments.astro'
import TodayCalendar from '@/components/sidebar/TodayCalendar.astro'
import 'tippy.js/dist/tippy.css'
import 'tippy.js/themes/light.css'

interface Props {
  posts: Post[]
  tags: Tag[]
}

const { posts, tags } = Astro.props
---

<aside class="sidebar col-12 col-xl-3 d-none d-xl-block">
  <div class="sidebar-inner block">
    <SearchBar />
    <AdminBlock session={Astro.session}>
      <PendingComments />
    </AdminBlock>
    <RandomPosts {posts} />
    <RecentComments />
    <RandomTags {tags} />
    <TodayCalendar />
  </div>
</aside>

<script>
import tippy from 'tippy.js'
import { stickySidebar } from '@/assets/scripts/sidebar'

// Sticky Sidebar
stickySidebar({
  elements: '.sidebar',
  additionalMarginTop: 30,
})

// Tooltips
tippy('.sidebar .widget-title', {
  theme: 'light',
  placement: 'left',
  animation: 'fade',
})
</script>
