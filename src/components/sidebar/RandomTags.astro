---
import type { Tag } from '@/helpers/content/schema'
import _ from 'lodash'
import config from '@/blog.config'

interface Props {
  tags: Tag[]
}

const { tags } = Astro.props
const randomSize = config.settings.sidebar.tag
const topTags = tags.sort((a, b) => b.counts - a.counts).slice(0, randomSize * 2)
---

{
  randomSize > 0 && (
    <div id="tag-cloud" class="widget widget-tag-cloud">
      <div class="widget-title" data-tippy-content="流水落花春去也，天上人间。">
        文踪墨迹
      </div>
      <div class="tagcloud">
        {_.sampleSize(topTags, randomSize).map((tag) => (
          <a href={tag.permalink} class="tag-cloud-link" title={`${tag.name} (${tag.counts} 篇文章)`}>
            {tag.name}
          </a>
        ))}
      </div>
    </div>
  )
}
